<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Location App</title>
		<link href="./styles/global.css" rel="stylesheet" />
		<link href="./styles/index.css" rel="stylesheet" />

		<!-- maplibre -->
		<link
			href="https://unpkg.com/maplibre-gl@3.x/dist/maplibre-gl.css"
			rel="stylesheet"
		/>
	</head>

	<body>
		<header>
			<img src="./assets/location-marker.svg" alt="Location marker icon" />
			<a href="index.html"
				><h1>
					Location <br />
					Application
				</h1></a
			>
		</header>
		<main>
			<div id="loader-container"><div id="loader"></div></div>
		</main>
	</body>

	<script>
		const urlOk =
			'https://u4hdqm5uvkvdthwk54elxlkpbi0wpdef.lambda-url.eu-west-1.on.aws?id=lana-test-200';
		const urlNotFound =
			'https://u4hdqm5uvkvdthwk54elxlkpbi0wpdef.lambda-url.eu-west-1.on.aws?id=lana-test-404';

		async function apiCall(url) {
			const response = await fetch(url, {
				method: 'GET',
				mode: 'cors',
			});

			return response.status;
		}

		async function checkStatus() {
			const status = await apiCall(urlOk);

			if (status === 200) {
				window.location.href = '../../front-end/pages/share-location.html';
			} else if (status === 404) {
				window.location.href = '../../front-end/pages/not-found.html';
			}
		}

		checkStatus();
	</script>
</html>
